---
alwaysApply: true
---

# Code Standards

## General Principles
- **Concise over verbose**: Short, clear variable names
- **Flat over nested**: Avoid deep nesting, use early returns
- **Explicit over implicit**: No magic behavior
- **Simple over clever**: Readable code beats clever tricks

## Naming Conventions
- Variables: `snake_case` (e.g., `file_path`, `unused_days`)
- Functions: `snake_case` (e.g., `scan_directory`, `filter_by_size`)
- Constants: `UPPER_SNAKE_CASE` (e.g., `DEFAULT_MIN_SIZE`)
- Abbreviations OK when obvious: `fpath`, `fsize`, `mtime`

## Function Guidelines
- **Max 30 lines per function**
- **Single responsibility**: One clear purpose per function
- **Pure functions preferred**: Input → Output, minimal side effects
- **Type hints required**: Use for function signatures
- **Docstrings for public functions**: Brief, example-focused

```python
def filter_by_age(files: list[Path], days: int) -> list[Path]:
    """Return files not accessed in specified days.
    
    Args:
        files: List of file paths to filter
        days: Minimum age in days
    
    Returns:
        Filtered list of old files
    """
```

## Module Structure
- **Imports**: Standard lib → Third party → Local
- **No circular imports**: Strict module hierarchy
- **Private functions**: Prefix with `_` if module-internal only
- **Keep modules under 200 lines**: Split if growing too large

## Error Handling
- **Specific exceptions**: Catch what you expect
- **Log, don't crash**: Skip problematic files, continue operation
- **User-friendly messages**: No raw tracebacks to end users
- **Use context managers**: For file operations, ensure cleanup

```python
try:
    result = process_file(fpath)
except PermissionError:
    logger.warning(f"Permission denied: {fpath}")
    continue
```

## Forbidden Patterns
- ❌ Global mutable state
- ❌ Classes without clear benefit over functions
- ❌ Deep inheritance hierarchies
- ❌ Overly abstracted code
- ❌ Premature optimization